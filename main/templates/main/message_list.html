<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages</title>
</head>
<body>
    <ul>
        {% for message in messages %}
            <li>
                {% if time_period == 'morning' %}
                    <strong>아침메세지:</strong> {{ message.morning_mes }}<br>
                {% elif time_period == 'night' %}
                    <strong>밤메세지:</strong> {{ message.night_mes }}<br>
                {% endif %}
                <strong>작성 시간:</strong> {{ message.created_at }}<br>
                <strong>{{ message.nick.nickname }}</strong>
                
                <p>❤️ {{ message.total_likes }} total likes</p>
                
                {% if message.id in user_liked_message_ids %}
                    <form method="post" action="{% url 'main:like_message' message.id %}">
                        {% csrf_token %}
                        <button type="submit">✖️ Unlike</button>
                    </form>
                {% else %}
                    <form method="post" action="{% url 'main:like_message' message.id %}">
                        {% csrf_token %}
                        <button type="submit">❤️ Like</button>
                    </form>
                {% endif %}
            </li>
        {% empty %}
            <li>현재 시간대에 해당하는 메시지가 없습니다.</li>
        {% endfor %}
    </ul>

    {% if next_user_message %}
    <h2>다음 사용자 메시지 열람</h2>
    <p><strong>Morning:</strong> {{ next_user_message.morning_mes }}</p>
    <p><strong>Night:</strong> {{ next_user_message.night_mes }}</p>
    <p><strong>작성자:</strong> {{ next_user_message.nick.nickname }}</p>
    {% endif %}

    <hr>
    <a href="{% url 'main:main' %}">돌아가기</a>
</body>
</html>


